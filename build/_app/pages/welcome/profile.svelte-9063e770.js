import{S as t,i as e,s,X as n,Y as a,a as o,d as r,b as i,f as l,I as c,M as u,N as d,av as f,O as $,T as p,j as h,m,o as g,R as v,x as w,u as y,v as x,K as k,e as C,t as E,k as b,c as j,g as S,n as T,Z as F,V as R,aw as _,r as z,w as B,ap as D,l as O,al as A,D as I,J as M,ar as N,as as U}from"../../chunks/vendor-9977621c.js";import{g as V}from"../../chunks/navigation-2ffed81e.js";import{C as Y}from"../../chunks/Content-1b66c827.js";import{C as q}from"../../chunks/CallToActionContainer-1ae5e423.js";import{B as G}from"../../chunks/Button-7645acb2.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/survey-schema-481feb4b.js";function X(t){let e,s,h,m,g,v,w,y,x,k,C,E,b,j;return{c(){e=n("svg"),s=n("path"),g=n("g"),v=n("path"),x=n("defs"),k=n("linearGradient"),C=n("stop"),E=n("stop"),b=n("stop"),this.h()},l(t){e=a(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=o(e);s=a(n,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),o(s).forEach(r),g=a(n,"g",{});var i=o(g);v=a(i,"path",{d:!0,fill:!0}),o(v).forEach(r),i.forEach(r),x=a(n,"defs",{});var l=o(x);k=a(l,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var c=o(k);C=a(c,"stop",{"stop-color":!0}),o(C).forEach(r),E=a(c,"stop",{offset:!0,"stop-color":!0}),o(E).forEach(r),b=a(c,"stop",{offset:!0,"stop-color":!0}),o(b).forEach(r),c.forEach(r),l.forEach(r),n.forEach(r),this.h()},h(){i(s,"d","M1 127.619C21.591 127.619 45.2219 104 48 86.6193C50.7781 69.2386 49 52.5 37 52.5C25 52.5 24.5 64.7377 39 67.5C53.5 70.2623 90 42.8807 21 6"),i(s,"stroke","url(#paint0_linear)"),i(s,"stroke-width","2"),i(s,"stroke-linecap","round"),i(v,"d","M16.7936 6.80449C16.2329 5.50077 15.0019 2.53349 15.5375 1.87833C16.1876 1.08304 17.9814 1.6468 20.0777 2.08646C21.8484 2.45783 24.5709 2.9662 24.3878 4.0835C24.2626 4.84797 21.9746 4.79424 20.8596 6.12262C20.0794 7.05222 19.8038 9.26208 19.0255 9.56392C18.2472 9.86577 17.3544 8.10822 16.7936 6.80449Z"),i(v,"fill","#F53A68"),i(C,"stop-color","#FF9100"),i(E,"offset","0.489583"),i(E,"stop-color","#F10366"),i(b,"offset","1"),i(b,"stop-color","#6173FF"),i(k,"id","paint0_linear"),i(k,"x1","50.7846"),i(k,"y1","-43.3675"),i(k,"x2","-35.6052"),i(k,"y2","104.653"),i(k,"gradientUnits","userSpaceOnUse"),i(e,"width","63"),i(e,"height","129"),i(e,"viewBox","0 0 63 129"),i(e,"fill","none"),i(e,"xmlns","http://www.w3.org/2000/svg")},m(t,n){l(t,e,n),c(e,s),c(e,g),c(g,v),c(e,x),c(x,k),c(k,C),c(k,E),c(k,b),j=!0},p(e,[s]){t=e},i(e){j||(u((()=>{m&&m.end(1),h=d(s,f,{duration:1e3,delay:t[0]}),h.start()})),u((()=>{y&&y.end(1),w=d(g,$,{x:10,y:5,delay:800+t[0],opacity:0}),w.start()})),j=!0)},o(e){h&&h.invalidate(),e&&(m=p(s,f,{duration:500,delay:t[0]})),w&&w.invalidate(),e&&(y=p(g,$,{duration:350,delay:t[0],x:20,y:10})),j=!1},d(t){t&&r(e),t&&m&&m.end(),t&&y&&y.end()}}}function Z(t,e,s){let{delay:n=0}=e;return t.$$set=t=>{"delay"in t&&s(0,n=t.delay)},[n]}class J extends t{constructor(t){super(),e(this,t,Z,X,s,{delay:0})}}function K(t){let e;return{c(){e=E("Save & Continue")},l(t){e=S(t,"Save & Continue")},m(t,s){l(t,e,s)},d(t){t&&r(e)}}}function P(t){let e;return{c(){e=E("Skip for Now")},l(t){e=S(t,"Skip for Now")},m(t,s){l(t,e,s)},d(t){t&&r(e)}}}function H(t){let e,s,n,a,d,f,$,p,v;return p=new J({}),{c(){e=C("div"),s=E("the following 7"),n=C("br"),a=E(" questions are optional"),f=b(),$=C("div"),h(p.$$.fragment),this.h()},l(t){e=j(t,"DIV",{class:!0,style:!0});var i=o(e);s=S(i,"the following 7"),n=j(i,"BR",{}),a=S(i," questions are optional"),i.forEach(r),f=T(t),$=j(t,"DIV",{class:!0});var l=o($);m(p.$$.fragment,l),l.forEach(r),this.h()},h(){i(e,"class","shortcut-callout"),F(e,"text-align","right"),i($,"class","arrow svelte-1045c9n")},m(t,o){l(t,e,o),c(e,s),c(e,n),c(e,a),l(t,f,o),l(t,$,o),g(p,$,null),v=!0},i(t){v||(t&&u((()=>{d||(d=R(e,_,{duration:400},!0)),d.run(1)})),w(p.$$.fragment,t),v=!0)},o(t){t&&(d||(d=R(e,_,{duration:400},!1)),d.run(0)),y(p.$$.fragment,t),v=!1},d(t){t&&r(e),t&&d&&d.end(),t&&r(f),t&&r($),x(p)}}}function L(t){let e,s,n,a,f,p,k,E,S;s=new G({props:{size:"xl",product:!0,$$slots:{default:[K]},$$scope:{ctx:t}}}),s.$on("click",t[5]),a=new G({props:{size:"xl",product:!0,secondary:!0,$$slots:{default:[P]},$$scope:{ctx:t}}}),a.$on("click",t[6]);let F=t[1]&&t[2]&&H();return{c(){e=C("div"),h(s.$$.fragment),n=b(),h(a.$$.fragment),f=b(),F&&F.c(),this.h()},l(t){e=j(t,"DIV",{class:!0});var i=o(e);m(s.$$.fragment,i),n=T(i),m(a.$$.fragment,i),f=T(i),F&&F.l(i),i.forEach(r),this.h()},h(){i(e,"class","call-flow svelte-1045c9n")},m(o,r){l(o,e,r),g(s,e,null),c(e,n),g(a,e,null),c(e,f),F&&F.m(e,null),k=!0,E||(S=v(e,"introend",t[7]),E=!0)},p(t,n){const o={};256&n&&(o.$$scope={dirty:n,ctx:t}),s.$set(o);const r={};256&n&&(r.$$scope={dirty:n,ctx:t}),a.$set(r),t[1]&&t[2]?F?6&n&&w(F,1):(F=H(),F.c(),w(F,1),F.m(e,null)):F&&(z(),y(F,1,1,(()=>{F=null})),B())},i(t){k||(w(s.$$.fragment,t),w(a.$$.fragment,t),w(F),p||u((()=>{p=d(e,$,{duration:200,y:5}),p.start()})),k=!0)},o(t){y(s.$$.fragment,t),y(a.$$.fragment,t),y(F),k=!1},d(t){t&&r(e),x(s),x(a),F&&F.d(),E=!1,S()}}}function Q(t){let e,s,n,a,o,r=!1,i=()=>{r=!1};return u(t[4]),s=new q({props:{$$slots:{default:[L]},$$scope:{ctx:t}}}),{c(){h(s.$$.fragment)},l(t){m(s.$$.fragment,t)},m(l,c){g(s,l,c),n=!0,a||(o=v(window,"scroll",(()=>{r=!0,clearTimeout(e),e=setTimeout(i,100),t[4]()})),a=!0)},p(t,[n]){1&n&&!r&&(r=!0,clearTimeout(e),scrollTo(window.pageXOffset,t[0]),e=setTimeout(i,100));const a={};262&n&&(a.$$scope={dirty:n,ctx:t}),s.$set(a)},i(t){n||(w(s.$$.fragment,t),n=!0)},o(t){y(s.$$.fragment,t),n=!1},d(t){x(s,t),a=!1,o()}}}function W(t,e,s){const n=k();let a=0,o=!0,r=!1;return t.$$.update=()=>{1&t.$$.dirty&&s(1,o=!(a>20))},[a,o,r,n,function(){s(0,a=window.pageYOffset)},()=>n("save"),()=>n("skip"),()=>{s(2,r=!0)}]}class tt extends t{constructor(t){super(),e(this,t,W,Q,s,{})}}function et(t){let e,s,n,a,o;function i(e){t[7](e)}let c={};return void 0!==t[1]&&(c.formattedResults=t[1]),e=new Y({props:c}),N.push((()=>U(e,"formattedResults",i))),a=new tt({}),a.$on("save",t[4](!0)),a.$on("skip",t[4](!1)),{c(){h(e.$$.fragment),n=b(),h(a.$$.fragment)},l(t){m(e.$$.fragment,t),n=T(t),m(a.$$.fragment,t)},m(t,s){g(e,t,s),l(t,n,s),g(a,t,s),o=!0},p(t,n){const a={};!s&&2&n&&(s=!0,a.formattedResults=t[1],D((()=>s=!1))),e.$set(a)},i(t){o||(w(e.$$.fragment,t),w(a.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),y(a.$$.fragment,t),o=!1},d(t){x(e,t),t&&r(n),x(a,t)}}}function st(t){var e,s;let n,a,o,i=t[0]._initialized&&!(null==(s=null==(e=t[0])?void 0:e.user)?void 0:s.onboarded)&&et(t);return{c(){n=b(),i&&i.c(),a=O(),this.h()},l(t){A('[data-svelte="svelte-1gjniiu"]',document.head).forEach(r),n=T(t),i&&i.l(t),a=O(),this.h()},h(){document.title="Tell Us About Yourself | Mozilla Rally"},m(t,e){l(t,n,e),i&&i.m(t,e),l(t,a,e),o=!0},p(t,[e]){var s,n;t[0]._initialized&&!(null==(n=null==(s=t[0])?void 0:s.user)?void 0:n.onboarded)?i?(i.p(t,e),1&e&&w(i,1)):(i=et(t),i.c(),w(i,1),i.m(a.parentNode,a)):i&&(z(),y(i,1,1,(()=>{i=null})),B())},i(t){o||(w(i),o=!0)},o(t){y(i),o=!1},d(t){t&&r(n),i&&i.d(t),t&&r(a)}}}function nt(t,e,s){let n,a;var o,r=this&&this.__awaiter||function(t,e,s,n){return new(s||(s=Promise))((function(a,o){function r(t){try{l(n.next(t))}catch(e){o(e)}}function i(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,i)}l((n=n.apply(t,e||[])).next())}))};const i=I("rally:store");M(t,i,(t=>s(0,n=t)));const l=I("rally:isAuthenticated");let c;return M(t,l,(t=>s(6,a=t))),t.$$.update=()=>{97&t.$$.dirty&&(!1===a?V("/signup"):!0===a&&(null===s(5,o=null==n?void 0:n.user)||void 0===o?void 0:o.onboarded)&&V("/studies"))},[n,c,i,l,function(t=!1){return()=>r(this,void 0,void 0,(function*(){t&&(yield i.updateDemographicSurvey(c)),yield yield i.updateOnboardedStatus(!0),V("/studies")}))},o,a,function(t){c=t,s(1,c)}]}class at extends t{constructor(t){super(),e(this,t,nt,st,s,{})}}export{at as default};
